<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uçak Savaş Oyunu</title>
<style>
body {
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #111; 
    font-family: Arial, sans-serif;
}

#gameContainer {
    position: relative;
    width: 800px;
    height: 600px;
    overflow: hidden;
    border: 3px solid #fff;
    border-radius: 10px;
    background: linear-gradient(to top, #87CEFA 0%, #B0E0E6 100%); /* Gökyüzü mavisi gradient */
}

#player {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 50px;
    height: 50px;
    background-image: url('player.png');
    background-size: cover;
}

.enemy {
    position: absolute;
    width: 50px;
    height: 50px;
    background-image: url('enemy.png');
    background-size: cover;
}

.bullet {
    position: absolute;
    width: 5px;
    height: 15px;
    background-color: red;
}

#scoreBoard {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
    font-size: 20px;
}

#levelBoard {
    position: absolute;
    top: 10px;
    right: 10px;
    color: white;
    font-size: 20px;
}

#livesBoard {
    position: absolute;
    top: 40px;
    left: 10px;
    color: white;
    font-size: 20px;
}

#gameOverMessage {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: red;
    font-size: 36px;
    font-weight: bold;
    display: none;
}

#startButton, #restartButton {
    position: absolute;
    top: 60%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 12px 25px;
    font-size: 18px;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background-color: #28a745;
    color: white;
}

#restartButton {
    background-color: #007bff;
}

/* Bulutlar */
.cloud {
    position: absolute;
    width: 100px;
    height: 60px;
    background: white;
    border-radius: 50%;
    opacity: 0.8;
    animation: moveClouds linear infinite;
}

@keyframes moveClouds {
    from { transform: translateX(-150px); }
    to { transform: translateX(850px); }
}
</style>
</head>
<body>
<div id="gameContainer">
    <div id="player"></div>
    <div id="scoreBoard">Skor: <span id="score">0</span></div>
    <div id="levelBoard">Seviye: <span id="level">1</span></div>
    <div id="livesBoard">Can: <span id="lives">5</span></div>
    <div id="gameOverMessage">OYUN BİTTİ</div>
    <button id="startButton">Başlat</button>
    <button id="restartButton" style="display:none;">Yeniden Oyna</button>
</div>

<script>
let player;
let bullets = [];
let enemies = [];
let score = 0;
let gameInterval;
let enemyInterval;
let speedInterval;
let gameStarted = false;
let enemySpeed = 2;
let level = 1;
let lives = 5;
const gameArea = document.getElementById('gameContainer');

const keys = {};
let lastShotTime = 0;

const gameOverMessage = document.getElementById('gameOverMessage');
const startButton = document.getElementById('startButton');

document.getElementById('startButton').addEventListener('click', () => {
    addClouds();
    startGame();
});
document.getElementById('restartButton').addEventListener('click', restartGame);

document.addEventListener('keydown', function(event) {
    if (['ArrowLeft','ArrowRight',' '].includes(event.key)) {
        event.preventDefault();
        keys[event.key] = true;
    }
});

document.addEventListener('keyup', function(event) {
    if (['ArrowLeft','ArrowRight',' '].includes(event.key)) {
        keys[event.key] = false;
    }
});

function addClouds() {
    for(let i=0; i<5; i++) {
        const cloud = document.createElement('div');
        cloud.classList.add('cloud');
        cloud.style.top = Math.random() * 200 + 'px';
        cloud.style.left = Math.random() * 800 + 'px';
        cloud.style.animationDuration = (30 + Math.random() * 20) + 's';
        gameArea.appendChild(cloud);
    }
}

function startGame() {
    gameStarted = true;
    score = 0;
    level = 1;
    enemySpeed = 2;
    lives = 5;
    document.getElementById('score').innerText = score;
    document.getElementById('level').innerText = level;
    document.getElementById('lives').innerText = lives;
    document.getElementById('startButton').style.display = 'none';
    document.getElementById('restartButton').style.display = 'none';
    gameOverMessage.style.display = 'none';
    player = document.getElementById('player');
    player.style.left = '50%';
    player.style.transform = 'translateX(-50%)';
    gameInterval = setInterval(gameLoop, 20);
    enemyInterval = setInterval(spawnEnemy, 1000);
    speedInterval = setInterval(increaseDifficulty, 30000);
}

function restartGame() {
    clearInterval(gameInterval);
    clearInterval(enemyInterval);
    clearInterval(speedInterval);
    bullets.forEach(b => b.remove());
    enemies.forEach(e => e.remove());
    bullets = [];
    enemies = [];
    addClouds(); // bulutları tekrar ekle
    startGame();
}

function movePlayer(direction) {
    let currentLeft = parseInt(player.style.left) || player.offsetLeft;
    let newLeft = currentLeft + direction;
    if (newLeft < 0) newLeft = 0;
    if (newLeft > gameArea.offsetWidth - player.offsetWidth)
        newLeft = gameArea.offsetWidth - player.offsetWidth;
    player.style.left = newLeft + 'px';
}

function shoot() {
    const now = Date.now();
    if (now - lastShotTime > 250) {
        const bullet = document.createElement('div');
        bullet.classList.add('bullet');
        bullet.style.left = player.offsetLeft + player.offsetWidth/2 - 2.5 + 'px';
        bullet.style.bottom = '70px';
        gameArea.appendChild(bullet);
        bullets.push(bullet);
        lastShotTime = now;
    }
}

function spawnEnemy() {
    const enemy = document.createElement('div');
    enemy.classList.add('enemy');
    enemy.style.left = Math.random() * (gameArea.offsetWidth - 50) + 'px';
    enemy.style.top = '0px';
    gameArea.appendChild(enemy);
    enemies.push(enemy);
}

function increaseDifficulty() {
    enemySpeed += 1;
    level += 1;
    document.getElementById('level').innerText = level;
}

function gameLoop() {
    if (keys['ArrowLeft']) movePlayer(-10);
    if (keys['ArrowRight']) movePlayer(10);
    if (keys[' ']) shoot();
    moveBullets();
    moveEnemies();
    checkCollisions();
}

function moveBullets() {
    bullets.forEach((bullet, index) => {
        bullet.style.bottom = (parseInt(bullet.style.bottom) + 5) + 'px';
        if (parseInt(bullet.style.bottom) > gameArea.offsetHeight) {
            bullet.remove();
            bullets.splice(index, 1);
        }
    });
}

function moveEnemies() {
    enemies.forEach((enemy, index) => {
        enemy.style.top = (parseInt(enemy.style.top) || 0) + enemySpeed + 'px';
        if (parseInt(enemy.style.top) > gameArea.offsetHeight) {
            enemy.remove();
            enemies.splice(index, 1);
        }
    });
}

function checkCollisions() {
    bullets.forEach((bullet, bulletIndex) => {
        enemies.forEach((enemy, enemyIndex) => {
            if (isColliding(bullet, enemy)) {
                bullet.remove();
                enemy.remove();
                bullets.splice(bulletIndex, 1);
                enemies.splice(enemyIndex, 1);
                score++;
                document.getElementById('score').innerText = score;
            }
        });
    });

    enemies.forEach((enemy, enemyIndex) => {
        if (isColliding(player, enemy)) {
            enemy.remove();
            enemies.splice(enemyIndex, 1);
            lives--;
            document.getElementById('lives').innerText = lives;
            if (lives <= 0) {
                endGame();
            }
        }
    });
}

function endGame() {
    clearInterval(gameInterval);
    clearInterval(enemyInterval);
    clearInterval(speedInterval);
    bullets.forEach(b => b.remove());
    enemies.forEach(e => e.remove());
    bullets = [];
    enemies = [];
    gameOverMessage.style.display = 'block'; // Oyun Bitti mesajını göster
    document.getElementById('restartButton').style.display = 'block';
}

function isColliding(bullet, enemy) {
    const bulletRect = bullet.getBoundingClientRect();
    const enemyRect = enemy.getBoundingClientRect();
    return !(
        bulletRect.top > enemyRect.bottom ||
        bulletRect.bottom < enemyRect.top ||
        bulletRect.right < enemyRect.left ||
        bulletRect.left > enemyRect.right
    );
}
</script>
</body>
</html>
